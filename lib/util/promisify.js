"use strict";

module.exports = function promisify(f, o) {
  const ctx = o && o.context || null;
  return function promisify_wrap() {
    const args = Array.from(arguments);
    return new Promise(function promisify_resolver(resolve, reject) {
      args.push(function promisify_callback(err, value) {
        if (err) {
          return reject(err);
        }
        return resolve(value);
      });
      f.apply(ctx, args);
    });
  };
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhhcmQtc291cmNlLXdlYnBhY2stcGx1Z2luL2xpYi91dGlsL3Byb21pc2lmeS5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwicHJvbWlzaWZ5IiwiZiIsIm8iLCJjdHgiLCJjb250ZXh0IiwicHJvbWlzaWZ5X3dyYXAiLCJhcmdzIiwiQXJyYXkiLCJmcm9tIiwiYXJndW1lbnRzIiwiUHJvbWlzZSIsInByb21pc2lmeV9yZXNvbHZlciIsInJlc29sdmUiLCJyZWplY3QiLCJwdXNoIiwicHJvbWlzaWZ5X2NhbGxiYWNrIiwiZXJyIiwidmFsdWUiLCJhcHBseSJdLCJtYXBwaW5ncyI6Ijs7QUFBQUEsT0FBT0MsT0FBUCxHQUFpQixTQUFTQyxTQUFULENBQW1CQyxDQUFuQixFQUFzQkMsQ0FBdEIsRUFBeUI7QUFDeEMsUUFBTUMsTUFBT0QsS0FBS0EsRUFBRUUsT0FBUixJQUFvQixJQUFoQztBQUNBLFNBQU8sU0FBU0MsY0FBVCxHQUEwQjtBQUMvQixVQUFNQyxPQUFPQyxNQUFNQyxJQUFOLENBQVdDLFNBQVgsQ0FBYjtBQUNBLFdBQU8sSUFBSUMsT0FBSixDQUFZLFNBQVNDLGtCQUFULENBQTRCQyxPQUE1QixFQUFxQ0MsTUFBckMsRUFBNkM7QUFDOURQLFdBQUtRLElBQUwsQ0FBVSxTQUFTQyxrQkFBVCxDQUE0QkMsR0FBNUIsRUFBaUNDLEtBQWpDLEVBQXdDO0FBQ2hELFlBQUlELEdBQUosRUFBUztBQUNQLGlCQUFPSCxPQUFPRyxHQUFQLENBQVA7QUFDRDtBQUNELGVBQU9KLFFBQVFLLEtBQVIsQ0FBUDtBQUNELE9BTEQ7QUFNQWhCLFFBQUVpQixLQUFGLENBQVFmLEdBQVIsRUFBYUcsSUFBYjtBQUNELEtBUk0sQ0FBUDtBQVNELEdBWEQ7QUFZRCxDQWREIiwiZmlsZSI6ImhhcmQtc291cmNlLXdlYnBhY2stcGx1Z2luL2xpYi91dGlsL3Byb21pc2lmeS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcHJvbWlzaWZ5KGYsIG8pIHtcbiAgY29uc3QgY3R4ID0gKG8gJiYgby5jb250ZXh0KSB8fCBudWxsO1xuICByZXR1cm4gZnVuY3Rpb24gcHJvbWlzaWZ5X3dyYXAoKSB7XG4gICAgY29uc3QgYXJncyA9IEFycmF5LmZyb20oYXJndW1lbnRzKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gcHJvbWlzaWZ5X3Jlc29sdmVyKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgYXJncy5wdXNoKGZ1bmN0aW9uIHByb21pc2lmeV9jYWxsYmFjayhlcnIsIHZhbHVlKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc29sdmUodmFsdWUpO1xuICAgICAgfSk7XG4gICAgICBmLmFwcGx5KGN0eCwgYXJncyk7XG4gICAgfSk7XG4gIH07XG59O1xuIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdHlsZXJhcmJ1cy9kZXYvcHJvdmlkZXIvc3JjIn0=
