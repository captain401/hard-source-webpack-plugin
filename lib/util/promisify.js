"use strict";

require("source-map-support/register");

module.exports = function promisify(f, o) {
  const ctx = o && o.context || null;
  return function promisify_wrap() {
    const args = Array.from(arguments);
    return new Promise(function promisify_resolver(resolve, reject) {
      args.push(function promisify_callback(err, value) {
        if (err) {
          return reject(err);
        }
        return resolve(value);
      });
      f.apply(ctx, args);
    });
  };
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhhcmQtc291cmNlLXdlYnBhY2stcGx1Z2luL2xpYi91dGlsL3Byb21pc2lmeS5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwicHJvbWlzaWZ5IiwiZiIsIm8iLCJjdHgiLCJjb250ZXh0IiwicHJvbWlzaWZ5X3dyYXAiLCJhcmdzIiwiQXJyYXkiLCJmcm9tIiwiYXJndW1lbnRzIiwiUHJvbWlzZSIsInByb21pc2lmeV9yZXNvbHZlciIsInJlc29sdmUiLCJyZWplY3QiLCJwdXNoIiwicHJvbWlzaWZ5X2NhbGxiYWNrIiwiZXJyIiwidmFsdWUiLCJhcHBseSJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBQSxPQUFPQyxPQUFQLEdBQWlCLFNBQVNDLFNBQVQsQ0FBbUJDLENBQW5CLEVBQXNCQyxDQUF0QixFQUF5QjtBQUN4QyxRQUFNQyxNQUFPRCxLQUFLQSxFQUFFRSxPQUFSLElBQW9CLElBQWhDO0FBQ0EsU0FBTyxTQUFTQyxjQUFULEdBQTBCO0FBQy9CLFVBQU1DLE9BQU9DLE1BQU1DLElBQU4sQ0FBV0MsU0FBWCxDQUFiO0FBQ0EsV0FBTyxJQUFJQyxPQUFKLENBQVksU0FBU0Msa0JBQVQsQ0FBNEJDLE9BQTVCLEVBQXFDQyxNQUFyQyxFQUE2QztBQUM5RFAsV0FBS1EsSUFBTCxDQUFVLFNBQVNDLGtCQUFULENBQTRCQyxHQUE1QixFQUFpQ0MsS0FBakMsRUFBd0M7QUFDaEQsWUFBSUQsR0FBSixFQUFTO0FBQ1AsaUJBQU9ILE9BQU9HLEdBQVAsQ0FBUDtBQUNEO0FBQ0QsZUFBT0osUUFBUUssS0FBUixDQUFQO0FBQ0QsT0FMRDtBQU1BaEIsUUFBRWlCLEtBQUYsQ0FBUWYsR0FBUixFQUFhRyxJQUFiO0FBQ0QsS0FSTSxDQUFQO0FBU0QsR0FYRDtBQVlELENBZEQiLCJmaWxlIjoiaGFyZC1zb3VyY2Utd2VicGFjay1wbHVnaW4vbGliL3V0aWwvcHJvbWlzaWZ5LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwcm9taXNpZnkoZiwgbykge1xuICBjb25zdCBjdHggPSAobyAmJiBvLmNvbnRleHQpIHx8IG51bGw7XG4gIHJldHVybiBmdW5jdGlvbiBwcm9taXNpZnlfd3JhcCgpIHtcbiAgICBjb25zdCBhcmdzID0gQXJyYXkuZnJvbShhcmd1bWVudHMpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBwcm9taXNpZnlfcmVzb2x2ZXIocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBhcmdzLnB1c2goZnVuY3Rpb24gcHJvbWlzaWZ5X2NhbGxiYWNrKGVyciwgdmFsdWUpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICB9KTtcbiAgICAgIGYuYXBwbHkoY3R4LCBhcmdzKTtcbiAgICB9KTtcbiAgfTtcbn07XG4iXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90eWxlcmFyYnVzL2Rldi9wcm92aWRlci9zcmMifQ==
