'use strict';

require('source-map-support/register');

const cachePrefix = require('.').cachePrefix;
const LoggerFactory = require('../loggerFactory');

exports.moduleFreezeError = (compilation, module, e) => {
  const loggerSerial = LoggerFactory.getLogger(compilation).from('serial');
  const compilerName = compilation.compiler.name;
  const compilerContext = compilation.compiler.options.context;
  const identifierPrefix = cachePrefix(compilation);
  const moduleIdentifier = module.identifier();
  const shortener = new (require('webpack/lib/RequestShortener'))(compilerContext);
  const moduleReadable = module.readableIdentifier(shortener);

  loggerSerial.error({
    id: 'serialization--error-freezing-module',
    identifierPrefix,
    compilerName,
    moduleIdentifier,
    moduleReadable,
    error: e,
    errorMessage: e.message,
    errorStack: e.stack
  }, `Unable to freeze module "${moduleReadable}${compilerName ? `" in compilation "${compilerName}` : ''}". An error occured serializing it into a string: ${e.message}`);
};

exports.cacheNoParity = (compiler, { parityRoot }) => {
  const loggerSerial = new LoggerFactory(compiler).create().from('serial');
  loggerSerial.error({
    id: 'serialzation--cache-incomplete',
    parityRoot
  }, [`Previous cache did not complete parity check. ${parityRoot.reason}`, 'Resetting cache.'].join('\n'));
};

exports.serialBadCache = (compiler, error) => {
  const loggerSerial = new LoggerFactory(compiler).create().from('serial');
  loggerSerial.error({
    id: 'serialzation--bad-cache'
  }, ['Cache is corrupted.', error.stack || error.message || error].join('\n'));
};

const logCore = compiler => new LoggerFactory(compiler).create().from('core');

exports.configHashSetButNotUsed = (compiler, { cacheDirectory }) => {
  const loggerCore = logCore(compiler);
  loggerCore.error({
    id: 'confighash--directory-no-confighash',
    cacheDirectory: cacheDirectory
  }, 'HardSourceWebpackPlugin cannot use [confighash] in cacheDirectory ' + 'without configHash option being set and returning a non-falsy value.');
};

exports.configHashFirstBuild = (compiler, { cacheDirPath, configHash }) => {
  const loggerCore = logCore(compiler);
  loggerCore.log({
    id: 'confighash--new',
    cacheDirPath,
    configHash
  }, `HardSourceWebpackPlugin is writing to a new confighash path for the first time: ${cacheDirPath}`);
};

exports.configHashBuildWith = (compiler, { cacheDirPath, configHash }) => {
  const loggerCore = logCore(compiler);
  loggerCore.log({
    id: 'confighash--reused',
    cacheDirPath,
    configHash
  }, `HardSourceWebpackPlugin is reading from and writing to a confighash path: ${cacheDirPath}`);
};

exports.environmentInputs = (compiler, { inputs }) => {
  const loggerCore = logCore(compiler);
  loggerCore.log({
    id: 'environment--inputs',
    inputs
  }, `Tracking environment changes with ${inputs.join(', ')}.`);
};

exports.configHashChanged = compiler => {
  const loggerCore = logCore(compiler);
  loggerCore.warn({
    id: 'environment--config-changed'
  }, 'Environment has changed (configuration was changed).\n' + 'HardSourceWebpackPlugin will reset the cache and store a fresh one.');
};

exports.environmentHashChanged = compiler => {
  const loggerCore = logCore(compiler);
  loggerCore.warn({
    id: 'environment--changed'
  }, 'Environment has changed (node_modules was updated).\n' + 'HardSourceWebpackPlugin will reset the cache and store a fresh one.');
};

exports.hardSourceVersionChanged = compiler => {
  const loggerCore = logCore(compiler);
  loggerCore.warn({
    id: 'environment--hardsource-changed'
  }, 'Installed HardSource version does not match the saved ' + 'cache.\nHardSourceWebpackPlugin will reset the cache and store ' + 'a fresh one.');
};

exports.childCompilerWithoutCache = compilation => {
  var loggerUtil = LoggerFactory.getLogger(compilation).from('util');
  loggerUtil.error({
    id: 'childcompiler--no-cache',
    compilerName: compilation.compiler.name
  }, [`A child compiler (${compilation.compiler.name}) does not`, "have a memory cache. Enable a memory cache with webpack's", '`cache` configuration option. HardSourceWebpackPlugin will be', 'disabled for this child compiler until then.'].join('\n'));
};

exports.childCompilerUnnamedCache = compilation => {
  var loggerUtil = LoggerFactory.getLogger(compilation).from('util');
  loggerUtil.error({
    id: 'childcompiler--unnamed-cache',
    compilerName: compilation.compiler.name
  }, [`A child compiler (${compilation.compiler.name}) has a`, 'memory cache but its cache name is unknown.', 'HardSourceWebpackPlugin will be disabled for this child', 'compiler.'].join('\n'));
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhhcmQtc291cmNlLXdlYnBhY2stcGx1Z2luL2xpYi91dGlsL2xvZy1tZXNzYWdlcy5qcyJdLCJuYW1lcyI6WyJjYWNoZVByZWZpeCIsInJlcXVpcmUiLCJMb2dnZXJGYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZUZyZWV6ZUVycm9yIiwiY29tcGlsYXRpb24iLCJtb2R1bGUiLCJlIiwibG9nZ2VyU2VyaWFsIiwiZ2V0TG9nZ2VyIiwiZnJvbSIsImNvbXBpbGVyTmFtZSIsImNvbXBpbGVyIiwibmFtZSIsImNvbXBpbGVyQ29udGV4dCIsIm9wdGlvbnMiLCJjb250ZXh0IiwiaWRlbnRpZmllclByZWZpeCIsIm1vZHVsZUlkZW50aWZpZXIiLCJpZGVudGlmaWVyIiwic2hvcnRlbmVyIiwibW9kdWxlUmVhZGFibGUiLCJyZWFkYWJsZUlkZW50aWZpZXIiLCJlcnJvciIsImlkIiwiZXJyb3JNZXNzYWdlIiwibWVzc2FnZSIsImVycm9yU3RhY2siLCJzdGFjayIsImNhY2hlTm9QYXJpdHkiLCJwYXJpdHlSb290IiwiY3JlYXRlIiwicmVhc29uIiwiam9pbiIsInNlcmlhbEJhZENhY2hlIiwibG9nQ29yZSIsImNvbmZpZ0hhc2hTZXRCdXROb3RVc2VkIiwiY2FjaGVEaXJlY3RvcnkiLCJsb2dnZXJDb3JlIiwiY29uZmlnSGFzaEZpcnN0QnVpbGQiLCJjYWNoZURpclBhdGgiLCJjb25maWdIYXNoIiwibG9nIiwiY29uZmlnSGFzaEJ1aWxkV2l0aCIsImVudmlyb25tZW50SW5wdXRzIiwiaW5wdXRzIiwiY29uZmlnSGFzaENoYW5nZWQiLCJ3YXJuIiwiZW52aXJvbm1lbnRIYXNoQ2hhbmdlZCIsImhhcmRTb3VyY2VWZXJzaW9uQ2hhbmdlZCIsImNoaWxkQ29tcGlsZXJXaXRob3V0Q2FjaGUiLCJsb2dnZXJVdGlsIiwiY2hpbGRDb21waWxlclVubmFtZWRDYWNoZSJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE1BQU1BLGNBQWNDLFFBQVEsR0FBUixFQUFhRCxXQUFqQztB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QkFBUixHQUFvQzdDLGVBQWU7QUFDakQsTUFBSThDLGFBQWFqRCxjQUFjTyxTQUFkLENBQXdCSixXQUF4QixFQUFxQ0ssSUFBckMsQ0FBMEMsTUFBMUMsQ0FBakI7QUFDQXlDLGFBQVc1QixLQUFYLENBQ0U7QUFDRUMsUUFBSSx5QkFETjtBQUVFYixrQkFBY04sWUFBWU8sUUFBWixDQUFxQkM7QUFGckMsR0FERixFQUtFLENBQ0cscUJBQW9CUixZQUFZTyxRQUFaLENBQXFCQyxJQUFLLFlBRGpELEVBRUUsMkRBRkYsRUFHRSwrREFIRixFQUlFLDhDQUpGLEVBS0VvQixJQUxGLENBS08sSUFMUCxDQUxGO0FBWUQsQ0FkRDs7QUFnQkE5QixRQUFRaUQseUJBQVIsR0FBb0MvQyxlQUFlO0FBQ2pELE1BQUk4QyxhQUFhakQsY0FBY08sU0FBZCxDQUF3QkosV0FBeEIsRUFBcUNLLElBQXJDLENBQTBDLE1BQTFDLENBQWpCO0FBQ0F5QyxhQUFXNUIsS0FBWCxDQUNFO0FBQ0VDLFFBQUksOEJBRE47QUFFRWIsa0JBQWNOLFlBQVlPLFFBQVosQ0FBcUJDO0FBRnJDLEdBREYsRUFLRSxDQUNHLHFCQUFvQlIsWUFBWU8sUUFBWixDQUFxQkMsSUFBSyxTQURqRCxFQUVFLDZDQUZGLEVBR0UseURBSEYsRUFJRSxXQUpGLEVBS0VvQixJQUxGLENBS08sSUFMUCxDQUxGO0FBWUQsQ0FkRCIsImZpbGUiOiJoYXJkLXNvdXJjZS13ZWJwYWNrLXBsdWdpbi9saWIvdXRpbC9sb2ctbWVzc2FnZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjYWNoZVByZWZpeCA9IHJlcXVpcmUoJy4nKS5jYWNoZVByZWZpeDtcbmNvbnN0IExvZ2dlckZhY3RvcnkgPSByZXF1aXJlKCcuLi9sb2dnZXJGYWN0b3J5Jyk7XG5cbmV4cG9ydHMubW9kdWxlRnJlZXplRXJyb3IgPSAoY29tcGlsYXRpb24sIG1vZHVsZSwgZSkgPT4ge1xuICBjb25zdCBsb2dnZXJTZXJpYWwgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihjb21waWxhdGlvbikuZnJvbSgnc2VyaWFsJyk7XG4gIGNvbnN0IGNvbXBpbGVyTmFtZSA9IGNvbXBpbGF0aW9uLmNvbXBpbGVyLm5hbWU7XG4gIGNvbnN0IGNvbXBpbGVyQ29udGV4dCA9IGNvbXBpbGF0aW9uLmNvbXBpbGVyLm9wdGlvbnMuY29udGV4dDtcbiAgY29uc3QgaWRlbnRpZmllclByZWZpeCA9IGNhY2hlUHJlZml4KGNvbXBpbGF0aW9uKTtcbiAgY29uc3QgbW9kdWxlSWRlbnRpZmllciA9IG1vZHVsZS5pZGVudGlmaWVyKCk7XG4gIGNvbnN0IHNob3J0ZW5lciA9IG5ldyAocmVxdWlyZSgnd2VicGFjay9saWIvUmVxdWVzdFNob3J0ZW5lcicpKShcbiAgICBjb21waWxlckNvbnRleHQsXG4gICk7XG4gIGNvbnN0IG1vZHVsZVJlYWRhYmxlID0gbW9kdWxlLnJlYWRhYmxlSWRlbnRpZmllcihzaG9ydGVuZXIpO1xuXG4gIGxvZ2dlclNlcmlhbC5lcnJvcihcbiAgICB7XG4gICAgICBpZDogJ3NlcmlhbGl6YXRpb24tLWVycm9yLWZyZWV6aW5nLW1vZHVsZScsXG4gICAgICBpZGVudGlmaWVyUHJlZml4LFxuICAgICAgY29tcGlsZXJOYW1lLFxuICAgICAgbW9kdWxlSWRlbnRpZmllcixcbiAgICAgIG1vZHVsZVJlYWRhYmxlLFxuICAgICAgZXJyb3I6IGUsXG4gICAgICBlcnJvck1lc3NhZ2U6IGUubWVzc2FnZSxcbiAgICAgIGVycm9yU3RhY2s6IGUuc3RhY2ssXG4gICAgfSxcbiAgICBgVW5hYmxlIHRvIGZyZWV6ZSBtb2R1bGUgXCIke21vZHVsZVJlYWRhYmxlfSR7XG4gICAgICBjb21waWxlck5hbWUgPyBgXCIgaW4gY29tcGlsYXRpb24gXCIke2NvbXBpbGVyTmFtZX1gIDogJydcbiAgICB9XCIuIEFuIGVycm9yIG9jY3VyZWQgc2VyaWFsaXppbmcgaXQgaW50byBhIHN0cmluZzogJHtlLm1lc3NhZ2V9YCxcbiAgKTtcbn07XG5cbmV4cG9ydHMuY2FjaGVOb1Bhcml0eSA9IChjb21waWxlciwgeyBwYXJpdHlSb290IH0pID0+IHtcbiAgY29uc3QgbG9nZ2VyU2VyaWFsID0gbmV3IExvZ2dlckZhY3RvcnkoY29tcGlsZXIpLmNyZWF0ZSgpLmZyb20oJ3NlcmlhbCcpO1xuICBsb2dnZXJTZXJpYWwuZXJyb3IoXG4gICAge1xuICAgICAgaWQ6ICdzZXJpYWx6YXRpb24tLWNhY2hlLWluY29tcGxldGUnLFxuICAgICAgcGFyaXR5Um9vdCxcbiAgICB9LFxuICAgIFtcbiAgICAgIGBQcmV2aW91cyBjYWNoZSBkaWQgbm90IGNvbXBsZXRlIHBhcml0eSBjaGVjay4gJHtwYXJpdHlSb290LnJlYXNvbn1gLFxuICAgICAgJ1Jlc2V0dGluZyBjYWNoZS4nLFxuICAgIF0uam9pbignXFxuJyksXG4gICk7XG59O1xuXG5leHBvcnRzLnNlcmlhbEJhZENhY2hlID0gKGNvbXBpbGVyLCBlcnJvcikgPT4ge1xuICBjb25zdCBsb2dnZXJTZXJpYWwgPSBuZXcgTG9nZ2VyRmFjdG9yeShjb21waWxlcikuY3JlYXRlKCkuZnJvbSgnc2VyaWFsJyk7XG4gIGxvZ2dlclNlcmlhbC5lcnJvcihcbiAgICB7XG4gICAgICBpZDogJ3NlcmlhbHphdGlvbi0tYmFkLWNhY2hlJyxcbiAgICB9LFxuICAgIFsnQ2FjaGUgaXMgY29ycnVwdGVkLicsIGVycm9yLnN0YWNrIHx8IGVycm9yLm1lc3NhZ2UgfHwgZXJyb3JdLmpvaW4oJ1xcbicpLFxuICApO1xufTtcblxuY29uc3QgbG9nQ29yZSA9IGNvbXBpbGVyID0+IG5ldyBMb2dnZXJGYWN0b3J5KGNvbXBpbGVyKS5jcmVhdGUoKS5mcm9tKCdjb3JlJyk7XG5cbmV4cG9ydHMuY29uZmlnSGFzaFNldEJ1dE5vdFVzZWQgPSAoY29tcGlsZXIsIHsgY2FjaGVEaXJlY3RvcnkgfSkgPT4ge1xuICBjb25zdCBsb2dnZXJDb3JlID0gbG9nQ29yZShjb21waWxlcik7XG4gIGxvZ2dlckNvcmUuZXJyb3IoXG4gICAge1xuICAgICAgaWQ6ICdjb25maWdoYXNoLS1kaXJlY3Rvcnktbm8tY29uZmlnaGFzaCcsXG4gICAgICBjYWNoZURpcmVjdG9yeTogY2FjaGVEaXJlY3RvcnksXG4gICAgfSxcbiAgICAnSGFyZFNvdXJjZVdlYnBhY2tQbHVnaW4gY2Fubm90IHVzZSBbY29uZmlnaGFzaF0gaW4gY2FjaGVEaXJlY3RvcnkgJyArXG4gICAgICAnd2l0aG91dCBjb25maWdIYXNoIG9wdGlvbiBiZWluZyBzZXQgYW5kIHJldHVybmluZyBhIG5vbi1mYWxzeSB2YWx1ZS4nLFxuICApO1xufTtcblxuZXhwb3J0cy5jb25maWdIYXNoRmlyc3RCdWlsZCA9IChjb21waWxlciwgeyBjYWNoZURpclBhdGgsIGNvbmZpZ0hhc2ggfSkgPT4ge1xuICBjb25zdCBsb2dnZXJDb3JlID0gbG9nQ29yZShjb21waWxlcik7XG4gIGxvZ2dlckNvcmUubG9nKFxuICAgIHtcbiAgICAgIGlkOiAnY29uZmlnaGFzaC0tbmV3JyxcbiAgICAgIGNhY2hlRGlyUGF0aCxcbiAgICAgIGNvbmZpZ0hhc2gsXG4gICAgfSxcbiAgICBgSGFyZFNvdXJjZVdlYnBhY2tQbHVnaW4gaXMgd3JpdGluZyB0byBhIG5ldyBjb25maWdoYXNoIHBhdGggZm9yIHRoZSBmaXJzdCB0aW1lOiAke2NhY2hlRGlyUGF0aH1gLFxuICApO1xufTtcblxuZXhwb3J0cy5jb25maWdIYXNoQnVpbGRXaXRoID0gKGNvbXBpbGVyLCB7IGNhY2hlRGlyUGF0aCwgY29uZmlnSGFzaCB9KSA9PiB7XG4gIGNvbnN0IGxvZ2dlckNvcmUgPSBsb2dDb3JlKGNvbXBpbGVyKTtcbiAgbG9nZ2VyQ29yZS5sb2coXG4gICAge1xuICAgICAgaWQ6ICdjb25maWdoYXNoLS1yZXVzZWQnLFxuICAgICAgY2FjaGVEaXJQYXRoLFxuICAgICAgY29uZmlnSGFzaCxcbiAgICB9LFxuICAgIGBIYXJkU291cmNlV2VicGFja1BsdWdpbiBpcyByZWFkaW5nIGZyb20gYW5kIHdyaXRpbmcgdG8gYSBjb25maWdoYXNoIHBhdGg6ICR7Y2FjaGVEaXJQYXRofWAsXG4gICk7XG59O1xuXG5leHBvcnRzLmVudmlyb25tZW50SW5wdXRzID0gKGNvbXBpbGVyLCB7IGlucHV0cyB9KSA9PiB7XG4gIGNvbnN0IGxvZ2dlckNvcmUgPSBsb2dDb3JlKGNvbXBpbGVyKTtcbiAgbG9nZ2VyQ29yZS5sb2coXG4gICAge1xuICAgICAgaWQ6ICdlbnZpcm9ubWVudC0taW5wdXRzJyxcbiAgICAgIGlucHV0cyxcbiAgICB9LFxuICAgIGBUcmFja2luZyBlbnZpcm9ubWVudCBjaGFuZ2VzIHdpdGggJHtpbnB1dHMuam9pbignLCAnKX0uYCxcbiAgKTtcbn07XG5cbmV4cG9ydHMuY29uZmlnSGFzaENoYW5nZWQgPSBjb21waWxlciA9PiB7XG4gIGNvbnN0IGxvZ2dlckNvcmUgPSBsb2dDb3JlKGNvbXBpbGVyKTtcbiAgbG9nZ2VyQ29yZS53YXJuKFxuICAgIHtcbiAgICAgIGlkOiAnZW52aXJvbm1lbnQtLWNvbmZpZy1jaGFuZ2VkJyxcbiAgICB9LFxuICAgICdFbnZpcm9ubWVudCBoYXMgY2hhbmdlZCAoY29uZmlndXJhdGlvbiB3YXMgY2hhbmdlZCkuXFxuJyArXG4gICAgICAnSGFyZFNvdXJjZVdlYnBhY2tQbHVnaW4gd2lsbCByZXNldCB0aGUgY2FjaGUgYW5kIHN0b3JlIGEgZnJlc2ggb25lLicsXG4gICk7XG59O1xuXG5leHBvcnRzLmVudmlyb25tZW50SGFzaENoYW5nZWQgPSBjb21waWxlciA9PiB7XG4gIGNvbnN0IGxvZ2dlckNvcmUgPSBsb2dDb3JlKGNvbXBpbGVyKTtcbiAgbG9nZ2VyQ29yZS53YXJuKFxuICAgIHtcbiAgICAgIGlkOiAnZW52aXJvbm1lbnQtLWNoYW5nZWQnLFxuICAgIH0sXG4gICAgJ0Vudmlyb25tZW50IGhhcyBjaGFuZ2VkIChub2RlX21vZHVsZXMgd2FzIHVwZGF0ZWQpLlxcbicgK1xuICAgICAgJ0hhcmRTb3VyY2VXZWJwYWNrUGx1Z2luIHdpbGwgcmVzZXQgdGhlIGNhY2hlIGFuZCBzdG9yZSBhIGZyZXNoIG9uZS4nLFxuICApO1xufTtcblxuZXhwb3J0cy5oYXJkU291cmNlVmVyc2lvbkNoYW5nZWQgPSBjb21waWxlciA9PiB7XG4gIGNvbnN0IGxvZ2dlckNvcmUgPSBsb2dDb3JlKGNvbXBpbGVyKTtcbiAgbG9nZ2VyQ29yZS53YXJuKFxuICAgIHtcbiAgICAgIGlkOiAnZW52aXJvbm1lbnQtLWhhcmRzb3VyY2UtY2hhbmdlZCcsXG4gICAgfSxcbiAgICAnSW5zdGFsbGVkIEhhcmRTb3VyY2UgdmVyc2lvbiBkb2VzIG5vdCBtYXRjaCB0aGUgc2F2ZWQgJyArXG4gICAgICAnY2FjaGUuXFxuSGFyZFNvdXJjZVdlYnBhY2tQbHVnaW4gd2lsbCByZXNldCB0aGUgY2FjaGUgYW5kIHN0b3JlICcgK1xuICAgICAgJ2EgZnJlc2ggb25lLicsXG4gICk7XG59O1xuXG5leHBvcnRzLmNoaWxkQ29tcGlsZXJXaXRob3V0Q2FjaGUgPSBjb21waWxhdGlvbiA9PiB7XG4gIHZhciBsb2dnZXJVdGlsID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoY29tcGlsYXRpb24pLmZyb20oJ3V0aWwnKTtcbiAgbG9nZ2VyVXRpbC5lcnJvcihcbiAgICB7XG4gICAgICBpZDogJ2NoaWxkY29tcGlsZXItLW5vLWNhY2hlJyxcbiAgICAgIGNvbXBpbGVyTmFtZTogY29tcGlsYXRpb24uY29tcGlsZXIubmFtZSxcbiAgICB9LFxuICAgIFtcbiAgICAgIGBBIGNoaWxkIGNvbXBpbGVyICgke2NvbXBpbGF0aW9uLmNvbXBpbGVyLm5hbWV9KSBkb2VzIG5vdGAsXG4gICAgICBcImhhdmUgYSBtZW1vcnkgY2FjaGUuIEVuYWJsZSBhIG1lbW9yeSBjYWNoZSB3aXRoIHdlYnBhY2snc1wiLFxuICAgICAgJ2BjYWNoZWAgY29uZmlndXJhdGlvbiBvcHRpb24uIEhhcmRTb3VyY2VXZWJwYWNrUGx1Z2luIHdpbGwgYmUnLFxuICAgICAgJ2Rpc2FibGVkIGZvciB0aGlzIGNoaWxkIGNvbXBpbGVyIHVudGlsIHRoZW4uJyxcbiAgICBdLmpvaW4oJ1xcbicpLFxuICApO1xufTtcblxuZXhwb3J0cy5jaGlsZENvbXBpbGVyVW5uYW1lZENhY2hlID0gY29tcGlsYXRpb24gPT4ge1xuICB2YXIgbG9nZ2VyVXRpbCA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKGNvbXBpbGF0aW9uKS5mcm9tKCd1dGlsJyk7XG4gIGxvZ2dlclV0aWwuZXJyb3IoXG4gICAge1xuICAgICAgaWQ6ICdjaGlsZGNvbXBpbGVyLS11bm5hbWVkLWNhY2hlJyxcbiAgICAgIGNvbXBpbGVyTmFtZTogY29tcGlsYXRpb24uY29tcGlsZXIubmFtZSxcbiAgICB9LFxuICAgIFtcbiAgICAgIGBBIGNoaWxkIGNvbXBpbGVyICgke2NvbXBpbGF0aW9uLmNvbXBpbGVyLm5hbWV9KSBoYXMgYWAsXG4gICAgICAnbWVtb3J5IGNhY2hlIGJ1dCBpdHMgY2FjaGUgbmFtZSBpcyB1bmtub3duLicsXG4gICAgICAnSGFyZFNvdXJjZVdlYnBhY2tQbHVnaW4gd2lsbCBiZSBkaXNhYmxlZCBmb3IgdGhpcyBjaGlsZCcsXG4gICAgICAnY29tcGlsZXIuJyxcbiAgICBdLmpvaW4oJ1xcbicpLFxuICApO1xufTtcbiJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3R5bGVyYXJidXMvZGV2L3Byb3ZpZGVyL3NyYyJ9
